From 5de9d9c94d28b390aaf93b9b6226c66403f0a76d Mon Sep 17 00:00:00 2001
From: "richard.oshaughnessy" <richard.oshaughnessy@ligo.org>
Date: Tue, 4 Apr 2023 10:43:47 -0400
Subject: [PATCH 4/4] lalsimutils; more use of row.time_geocent method

(cherry picked from commit 1d5cdb076d993d4d65b3a8479e1327cdff05c109)
---
 MonteCarloMarginalizeCode/Code/RIFT/lalsimutils.py | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/MonteCarloMarginalizeCode/Code/RIFT/lalsimutils.py b/MonteCarloMarginalizeCode/Code/RIFT/lalsimutils.py
index 2e3eed66..aa4d250c 100644
--- a/MonteCarloMarginalizeCode/Code/RIFT/lalsimutils.py
+++ b/MonteCarloMarginalizeCode/Code/RIFT/lalsimutils.py
@@ -1640,9 +1640,12 @@ class ChooseWaveformParams:
         self.phi = row.longitude # Right ascension
         self.radec = True # Flag to interpret (theta,phi) as (DEC,RA)
         self.psi = row.polarization
-        self.tref = row.geocent_end_time
-        if lalmetaio_old_style:
-            self.tref += 1e-9*row.geocent_end_time_ns
+        if 'time_geocent' in dir(row):
+            self.tref = row.time_geocent
+        else:
+            self.tref = row.geocent_end_time
+            if lalmetaio_old_style or hasattr(row, 'geocent_end_time_ns'):
+                self.tref += 1e-9*row.geocent_end_time_ns
         self.taper = lalsim.GetTaperFromString(str(row.taper))
         # FAKED COLUMNS (nonstandard)
         self.lambda1 = row.alpha5
-- 
2.40.0

